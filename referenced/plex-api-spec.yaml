openapi: 3.1.0

info:
  title: Plex-API
  summary: A Plex Media Server API Map
  description: An Open API Spec for interacting with Plex.tv and Plex Servers
  version: 0.0.3
  contact:
    name: Luke Hagar
    email: Lukeslakemail@gmail.com
    url: "https://www.LukeHagar.com"

servers:
  - url: "{Protocol}://{Local IP}:{Port}"
    variables:
      Protocol:
        enum:
          - http
          - https
        default: http
        description: The protocol to use with your plex server
      Local IP:
        default: "10.10.10.47"
        description: The Local IP Address of your plex server
      Port:
        default: "32400"
        description: The port to access your plex server

security:
  - PlexToken: []

components:
  securitySchemes:
    PlexToken: # arbitrary name for the security scheme
      type: apiKey
      in: header # can be "header", "query" or "cookie"
      name: X-Plex-Token # name of the header, query parameter or cookie

paths:
  /clients:
    $ref: "./paths/clients.yaml"
  /:
    $ref: "./paths/root.yaml"
  /activities:
    $ref: "./paths/activities.yaml"
  /activities/{activityUUID}:
    $ref: "./paths/activities-cancel.yaml"
  /updater/status:
    $ref: "./paths/updater-status.yaml"
  /updater/check:
    $ref: "./paths/updater-check.yaml"
  /updater/apply:
    $ref: "./paths/updater-apply.yaml"
  /butler:
    $ref: "./paths/butler.yaml"
  /butler/{taskName}:
    $ref: "./paths/butler-task.yaml"
  /log:
    $ref: "./paths/log.yaml"
  /log/networked:
    $ref: "./paths/log-networked.yaml"
  /security/token:
    $ref: "./paths/security-token.yaml"
  /security/resources:
    $ref: "./paths/security-resources.yaml"
  /library/sections/{sectionId}/all:
    $ref: "./paths/library-content-all.yaml"
  /library/sections/{sectionId}/refresh:
    $ref: "./paths/library-refresh.yaml"
  /library/sections/{sectionId}/latest:
    $ref: "./paths/library-content-latest.yaml"
  /library/sections/{sectionId}/common:
    $ref: "./paths/library-content-common.yaml"
  /library/sections/{sectionId}:
    $ref: "./paths/library-details.yaml"
  /library/sections:
    $ref: "./paths/all-libraries.yaml"
  /library/hashes:
    $ref: "./paths/library-hashes.yaml"
  /library/onDeck:
    $ref: "./paths/library-ondeck.yaml"
  /hubs:
    $ref: "./paths/hubs.yaml"
  /hubs/sections/{sectionId}:
    $ref: "./paths/hubs-section.yaml"
  /playlists/all:
    $ref: "./paths/all-playlists.yaml"
  /playlists:
    $ref: "./paths/playlists.yaml"
  /playlists/{playlistID}:
    $ref: "./paths/playlist-id.yaml"
  /playlists/{playlistID}/items:
    $ref: "./paths/playlist-contents.yaml"
  /playlists/upload:
    $ref: "./paths/playlist-upload.yaml"
  /hubs/search:
    $ref: "./paths/hubs-search.yaml"
  /hubs/search/voice:
    $ref: "./paths/hubs-search-voice.yaml"
  /user:
    servers:
      - url: https://plex.tv/api/v2  
    $ref: "./paths/user.yaml"
  /resources:
    servers:
      - url: https://plex.tv/api/v2
    $ref: "./paths/resources.yaml"
  /status/sessions:
    $ref: "./paths/sessions.yaml"
  /status/sessions/history/all:
    $ref: "./paths/session-history.yaml"
  /:/prefs:
    $ref: "./paths/server-preferences.yaml"

tags:
  - name: Activities
    description: |
      Activities are awesome. They provide a way to monitor and control asynchronous operations on the server. In order to receive real-time updates for activities, a client would normally subscribe via either EventSource or Websocket endpoints.
      Activities are associated with HTTP replies via a special `X-Plex-Activity` header which contains the UUID of the activity.
      Activities are optional cancellable. If cancellable, they may be cancelled via the `DELETE` endpoint. Other details:
      - They can contain a `progress` (from 0 to 100) marking the percent completion of the activity.
      - They must contain an `type` which is used by clients to distinguish the specific activity.
      - They may contain a `Context` object with attributes which associate the activity with various specific entities (items, libraries, etc.)
      - The may contain a `Response` object which attributes which represent the result of the asynchronous operation.
  - name: Butler
    description: |
      Butler is the task manager of the Plex Media Server Ecosystem.
  - name: Server
    description: |
      Operations against the Plex Media Server System.
  - name: Updater
    description: |
      This describes the API for searching and applying updates to the Plex Media Server.
      Updates to the status can be observed via the Event API.
  - name: Log
    description: |
      Submit logs to the Log Handler for Plex Media Server
  - name: Security
    description: |
      API Calls against Security for Plex Media Server
  - name: Library
    description: |
      API Calls interacting with Plex Media Server Libraries
  - name: Hubs
    description: |
      Hubs are a structured two-dimensional container for media, generally represented by multiple horizontal rows.
  - name: Playlists
    description: |
      Playlists are ordered collections of media. They can be dumb (just a list of media) or smart (based on a media query, such as "all albums from 2017"). 
      They can be organized in (optionally nesting) folders.
      Retrieving a playlist, or its items, will trigger a refresh of its metadata. 
      This may cause the duration and number of items to change.
  - name: Search
    description: |
      API Calls that perform search operations with Plex Media Server
  - name: User
    description: |
      API Calls that perform operations with Plex Media Server Users
